function ProfileView(e){function t(){var e=a+"/api/appUsers/"+n.userId+"?access_token="+n.id,t=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText),i(JSON.parse(this.responseText))},onerror:function(e){Ti.API.info(e.error+" "+JSON.stringify(e))},timeout:5e3});t.open("GET",e),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("charset","utf-8"),t.send()}function i(e){data=e.details,meta=e.meta_data,tableData=[];var t=Ti.UI.createView({height:"45%",backgroundColor:"#bbb",top:"0dp"}),i=Ti.UI.createView({height:"55%",backgroundColor:"transparent",bottom:"0dp"}),a=Ti.UI.createView({center:{y:"45%"},height:"110dp",width:"110dp",borderRadius:55}),n=Ti.UI.createImageView({height:"100%",width:"100%",image:data.profile_image||r+"placeholder.png"});a.add(n);var u=Ti.UI.createLabel({center:{y:"78%"},text:data.first_name+" "+data.last_name||"Omar Maghrabi",font:o}),T=Ti.UI.createLabel({center:{y:"90%"},text:data.city,font:d});t.add(a),t.add(u),t.add(T),l.add(t),l.add(s);for(var m=0;m<p.length;m++){rowData=p[m];var f=Ti.UI.createTableViewRow({height:"70dp",link:rowData.link,backgroundColor:"#efefef"}),g=Ti.UI.createImageView({image:r+rowData.icon,center:{x:"35dp"},link:rowData.link}),I=Ti.UI.createLabel({text:rowData.title,font:d,left:"70dp",link:rowData.link});f.add(g),f.add(I),tableData.push(f)}c.setData(tableData),i.add(c),l.add(i)}var a=Ti.App.Properties.getString("apiURL","http://104.131.124.227:3000"),r="/images/profile/",n=Ti.App.Properties.getObject("userCred"),o={fontFamily:"HelveticaNeue-Thin",fontSize:"28dp",color:"#fff"},d={fontFamily:"HelveticaNeue-Thin",fontSize:"22dp",color:"#fff"},s=Ti.UI.createImageView({image:r+"home.png",left:"12.5dp",center:{y:"50dp"}});tableData=[];var c=Ti.UI.createTableView({height:Ti.UI.FILL,top:"20dp"}),p=[{icon:"profile.png",title:"My Profile",link:"openProfile"},{icon:"inbox.png",title:"Family",link:"openInbox"},{icon:"interest.png",title:"Work",link:"openInterests"},{icon:"signOut.png",title:"Education",link:"logOut"}],l=Ti.UI.createView({backgroundImage:"/images/mainmenu/background.png",height:Ti.UI.FILL,width:Ti.UI.FILL});return t(),s.addEventListener("click",function(){e.remove(l)}),l}module.exports=ProfileView;