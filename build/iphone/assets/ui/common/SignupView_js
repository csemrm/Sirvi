function SignupView(){function e(e){var t=e.value,i=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();P.value=a+"-"+i+"-"+r}function t(e){var t=e,i=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return testresults=i.test(t)?!0:!1}function i(){var e=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText),a(JSON.parse(this.responseText))},onerror:function(e){Ti.API.info(e),alert(422==e.code?"Email Address already exists":"Check your internet connection and try again")},timeout:5e3});params={details:{masked_email:A.value.toLowerCase(),first_name:v.value,last_name:U.value,birthday:P.value,zip:y.value},email:A.value.toLowerCase(),password:b.value},Ti.API.info(params),e.open("POST",T),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("charset","utf-8"),e.send(JSON.stringify(params))}function a(e){p=e,p.email=A.value.toLowerCase(),p.password=b.value,p.fname=v.value,p.lname=U.value,p.zip=y.value,p.bday=P.value,p.password=b.value,Ti.App.Properties.setString("email",A.value.toLowerCase()),Ti.App.Properties.setString("password",b.value),r(),Ti.App.Properties.setBool("loggedIn",!0),Ti.fireEvent("loadBack"),o.animate({opacity:0,duration:750},function(){o=null}),Ti.fireEvent("TutorialView")}function r(){var e="/api/appUsers/login",t=Ti.App.Properties.getString("apiURL","http://104.131.124.227:3000"),i=t+e,a=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText),n(JSON.parse(this.responseText))},onerror:function(e){Ti.API.info(e.error+" "+JSON.stringify(e))},timeout:5e3});params={email:A.value.toLowerCase(),password:b.value},a.open("POST",i),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("charset","utf-8"),a.send(JSON.stringify(params)),Ti.API.info(JSON.stringify(params))}function n(e){p.userId=e.userId,p.id=e.id,Ti.API.info(p),Ti.App.Properties.setObject("userCred",p)}var o=Ti.UI.createView({backgroundColor:"#23b823",height:Ti.Platform.displayCaps.platformHeight,width:Ti.Platform.displayCaps.platformWidth,bottom:-Ti.Platform.displayCaps.platformHeight});o.animate({bottom:"0dp",duration:750});var d={fontFamily:"HelveticaNeue-Thin",fontSize:"28dp",color:"#fff"},c={fontFamily:"HelveticaNeue-Thin",fontSize:"22dp",color:"#fff"},s={fontFamily:"HelveticaNeue-Thin",fontSize:"18dp",color:"#fff"},p={},l="/api/appUsers",u=Ti.App.Properties.getString("apiURL","http://104.131.124.227:3000"),T=u+l,m="/images/signup/",f=Ti.UI.createView({height:"30dp",width:"40dp",center:{y:"40dp"}});o.add(f);var g=Ti.UI.createImageView({image:m+"arrow.png"});f.add(g);var h=Ti.UI.createImageView({image:m+"welcome.png",width:"294dp",center:{y:"15dp"}}),I=Ti.UI.createLabel({text:"Let's Get Started",font:d,color:"white",center:{y:"15dp"}}),w=Ti.UI.createScrollView({height:"450dp",width:"294dp"});Ti.Platform.displayCaps.platformHeight>500&&(w.add(h),w.add(I));var v=Ti.UI.createTextField({backgroundImage:m+"user.png",hintText:"FIRST NAME",font:c,width:"229.5dp",height:"28.5dp",paddingLeft:"35dp",color:"white"}),U=Ti.UI.createTextField({backgroundImage:m+"user.png",hintText:"LAST NAME",font:c,width:"229.5dp",height:"28.5dp",paddingLeft:"35dp",color:"white",top:"5%"}),A=Ti.UI.createTextField({backgroundImage:m+"email.png",hintText:"EMAIL",font:c,width:"229.5dp",height:"28.5dp",paddingLeft:"35dp",color:"white",top:"5%",keyboardType:Ti.UI.KEYBOARD_EMAIL}),b=Ti.UI.createTextField({backgroundImage:m+"pass.png",hintText:"PASSWORD",font:c,width:"229.5dp",height:"28.5dp",top:"5%",paddingLeft:"35dp",color:"white"}),P=Ti.UI.createTextField({backgroundImage:m+"bday.png",hintText:"BIRTHDAY",font:c,width:"229.5dp",height:"28.5dp",paddingLeft:"35dp",color:"white",top:"5%",editable:!1}),y=Ti.UI.createTextField({backgroundImage:m+"city.png",hintText:"ZIP",font:c,width:"229.5dp",height:"28.5dp",paddingLeft:"35dp",color:"white",top:"5%"}),L=Ti.UI.createImageView({image:m+"signupbtn.png",height:"47dp",width:"170.5dp"}),k=Ti.UI.createLabel({text:"SIGN UP",font:d,color:"white"}),E=Ti.UI.createButton({height:"47dp",width:"170.5dp",top:"28.5dp"});E.add(L),E.add(k);var S=Ti.UI.createView({width:"235dp",layout:"vertical",height:"390dp",top:"57dp"});S.add(v),S.add(U),S.add(A),S.add(b),S.add(P),S.add(y),S.add(E),w.add(S),o.add(w);var C=Ti.UI.createLabel({text:"Already have an account?  ",font:s,color:"white",height:"20dp"}),V=Ti.UI.createLabel({text:"Login",font:s,color:"yellow",height:"20dp"}),N=Titanium.UI.createView({width:Ti.UI.SIZE,layout:"horizontal",bottom:"20dp",height:"20dp"});N.add(C),N.add(V),o.add(N);var _=Ti.UI.createView({backgroundColor:"#000",height:Ti.UI.FILL,width:Ti.UI.FILL,opacity:.5,visible:!1});o.add(_);var x=Titanium.UI.createView({height:248,bottom:-248});return o.add(x),datePicker=Titanium.UI.createPicker({top:43,type:Titanium.UI.PICKER_TYPE_DATE,selectionIndicator:!0}),slideOut=Titanium.UI.createAnimation({bottom:-251}),slideIn=Titanium.UI.createAnimation({bottom:0}),pickerCancel=Titanium.UI.createButton({title:"Cancel"}),pickerDone=Titanium.UI.createButton({title:"Done"}),pickerSpacer=Titanium.UI.createButton({systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE}),pickerToolbar=Titanium.UI.createToolbar({top:0,width:320,items:[pickerSpacer,pickerDone],barColor:"transparent"}),x.add(datePicker),x.add(pickerToolbar),P.addEventListener("click",function(){v.blur(),U.blur(),A.blur(),b.blur(),y.blur(),_.show(),x.animate(slideIn)}),datePicker.addEventListener("change",e),pickerDone.addEventListener("click",function(){x.animate(slideOut),_.hide()}),N.addEventListener("click",function(){o.animate({bottom:-Ti.Platform.displayCaps.platformHeight,duration:750},function(){o=null}),Ti.fireEvent("login")}),f.addEventListener("click",function(){o.animate({bottom:-Ti.Platform.displayCaps.platformHeight,duration:750},function(){o=null}),Ti.fireEvent("closeSignup")}),E.addEventListener("click",function(){v.blur(),U.blur(),A.blur(),b.blur(),y.blur(),A.value&&b.value&&U.value&&y.value&&P.value&&v.value?t(A.value)?i():alert("Please Enter Valid Email Address"):alert("All fields are required.")}),o}module.exports=SignupView;