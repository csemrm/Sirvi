exports.Notifications=function(){function i(){function i(){Ti.Network.registerForPushNotifications({success:n,error:r,callback:t}),Ti.App.iOS.removeEventListener("usernotificationsettings",i)}function t(){Ti.fireEvent("openInbox")}function n(i){deviceToken=i.deviceToken,e(deviceToken)}function r(i){alert("Failed to register for push notifications! "+i.error)}"iPhone OS"==Ti.Platform.name&&parseInt(Ti.Platform.version.split(".")[0])>=8?(Ti.App.iOS.addEventListener("usernotificationsettings",i),Ti.App.iOS.registerUserNotificationSettings({types:[Ti.App.iOS.USER_NOTIFICATION_TYPE_ALERT,Ti.App.iOS.USER_NOTIFICATION_TYPE_SOUND,Ti.App.iOS.USER_NOTIFICATION_TYPE_BADGE]})):Ti.Network.registerForPushNotifications({types:[Ti.Network.NOTIFICATION_TYPE_BADGE,Ti.Network.NOTIFICATION_TYPE_ALERT,Ti.Network.NOTIFICATION_TYPE_SOUND],success:n,error:r,callback:t})}function t(){var i=require("net.iamyellow.gcmjs"),t=i.data;t&&null!==t&&Ti.API.info("******* data (started) "+JSON.stringify(t)),i.registerForPushNotifications({success:function(i){Ti.App.Properties.setString("deviceToken",i.deviceToken)},error:function(i){Ti.API.info("******* error, "+i.error)},callback:function(){alert("hellow yellow!")},unregister:function(i){Ti.API.info("******* unregister, "+i.deviceToken)},data:function(i){Ti.API.info("******* data (resumed) "+JSON.stringify(i))}})}function e(i){var t=Ti.App.Properties.getString("apiURL","http://104.131.124.227:3000"),e=t+"/api/installations",o=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText)},onerror:function(i){Ti.API.info(i.error+" Location Callback Function "+JSON.stringify(i)),alert("Error")},timeout:5e3});params={appId:Ti.App.id,userId:r.userId,deviceToken:i,deviceType:n},o.open("POST",e),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("charset","utf-8"),o.send(JSON.stringify(params)),Ti.API.info(JSON.stringify(params))}var n,r=Ti.App.Properties.getObject("userCred");"android"===Ti.Platform.osname?(n="android",t()):(n="ios",i())};