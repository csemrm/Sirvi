function MainMenu(){function e(){var e="/api/appUsers/login",t=d+e,a=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText),i(JSON.parse(this.responseText))},onerror:function(e){Ti.API.info(e.error+" "+JSON.stringify(e)),alert("Invalid Email Or Password")},timeout:5e3});params={email:Titanium.App.Properties.getString("email",T.email),password:Titanium.App.Properties.getString("pass",T.pass)},a.open("POST",t),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("charset","utf-8"),a.send(JSON.stringify(params)),Ti.API.info(JSON.stringify(params))}function i(e){userData=e,Ti.App.Properties.setObject("userCred",userData)}function t(e){var i=require("ui/common/SlideOutMenu");profileView=new i(e),c.add(y),y.animate({opacity:.7,duration:750}),c.add(profileView),Ti.addEventListener("closeSlideOut",function(){y.animate({opacity:0,duration:750},function(){c.remove(y),c.remove(profileView)})})}function a(e){if(!e.success||e.error)return void Ti.API.info("error: location callback: "+JSON.stringify(e.error));var i=d+"/api/appUsers/"+T.userId+"?access_token="+T.id,t=e.coords.longitude,a=e.coords.latitude,r=(e.coords.altitude,e.coords.heading,e.coords.accuracy,e.coords.speed,e.coords.timestamp,e.coords.altitudeAccuracy,Ti.Network.createHTTPClient({onload:function(){Ti.API.info(this.responseText)},onerror:function(e){Ti.API.info(e.error+" Location Callback Function "+JSON.stringify(e)),alert("Error")},timeout:5e3}));params={last_location:{lat:a,lng:t}},r.open("PUT",i),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("charset","utf-8"),r.send(JSON.stringify(params)),Ti.API.info(JSON.stringify(params))}function r(){function e(){var e=new Date,i=e.getHours(),t=e.getMinutes(),a=e.getMonth()+1,r=e.getDate(),n=e.getFullYear();return a+"/"+r+"/"+n+" - "+i+":"+t}function i(e){Ti.API.info(t.Device.status(e)+"making call..."),t.Device.connect({PhoneNumber:"+18666971684",CallerId:"+15612038918"}),Ti.API.info(t.Device.status(e)+"call enroute..."),c.add(P),c.add(a)}var t=require("com.twilio.client"),a=Ti.UI.createView({height:Ti.UI.SIZE,width:"90%",backgroundColor:"#white",borderRadius:8,layout:"vertical",opacity:.8}),r=Titanium.UI.createImageView({height:"50dp",width:"50dp",image:"/images/mainmenu/callBtn.png"}),n=Ti.UI.createLabel({text:"Connecting to Sirvi... \nPlease wait while we connect your concierge specialist",font:g,color:"black",textAlign:"left"}),o=Titanium.UI.createView({width:"100%",layout:"horizontal",height:Titanium.UI.SIZE});o.add(r),o.add(n),newButton=Titanium.UI.createButton({title:"End Call",color:"red"}),a.add(o),a.add(newButton),newButton.addEventListener("click",function(){t.Device.disconnectAll(),c.remove(a),c.remove(P)});var s="http://healthypeps.com/auth.php";i(this.responseText);var s="http://104.131.188.13/auth.php",p=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received capability token: "+this.responseText),t.Device.setup(this.responseText),i(this.responseText)},onerror:function(){Ti.Platform.openURL("tel:18666971684")},timeout:5e3});p.open("POST",s),authParams={caller:T.userId,access_token:T.id,lat:u,lng:l},p.send(authParams);var m=e(),f=d+"/api/calls/",I=Ti.Network.createHTTPClient({onload:function(){Ti.API.info(" "+this.responseText),t.Device.setup(this.responseText),i(this.responseText)},onerror:function(){Ti.Platform.openURL("tel:18666971684")},timeout:5e3});I.open("POST",f),authParams1={phone_number:0,wait_time:"00",start_time:m,intent:"00",resolution:"00",recording_url:"00",end_time:"00",id:T.userId,agentId:"objectid",appUserId:T.id},I.send(authParams1)}function n(){c.add(x)}function o(){var e="sirvipays";loaded?QuestionView.show():(QuestionView=new V(e),c.add(QuestionView),loaded=!0)}var d=Ti.App.Properties.getString("apiURL","http://104.131.124.227:3000"),s="/images/mainmenu/",c=Ti.UI.createView({backgroundImage:s+"background.png"}),p=require("/libs/notifications").Notifications;new p,loaded=!1,textloaded=!1;var l,u,m=require("ui/common/buttonCreator"),T=Ti.App.Properties.getObject("userCred");Ti.App.Properties.setBool("questions",!0),e();var g={fontFamily:"HelveticaNeue-Thin",fontSize:"16dp",color:"#fff"},f=Ti.UI.createImageView({image:s+"text.png",right:"12.5dp",bottom:"15dp"}),I=require("ui/common/FirstView");f.addEventListener("click",function(){textloaded?chatView.show():(chatView=new I,c.add(chatView),textloaded=!0)}),Ti.Geolocation.preferredProvider="gps",Ti.Geolocation.purpose="Find local deals",Titanium.Geolocation.accuracy=Titanium.Geolocation.ACCURACY_BEST,Titanium.Geolocation.distanceFilter=10,Titanium.Geolocation.getCurrentPosition(function(e){if(!e.success||e.error)return void Ti.API.info("error: get current position: "+JSON.stringify(e.error));l=e.coords.longitude,u=e.coords.latitude;{var i=(e.coords.altitude,e.coords.heading,e.coords.accuracy,e.coords.speed);e.coords.timestamp,e.coords.altitudeAccuracy}Ti.API.info("speed "+i),a(e)}),Ti.addEventListener("openProfile",function(){var e=require("ui/common/ProfileView");profile=new e(c),c.add(profile)}),Ti.addEventListener("openInbox",function(){var e=require("ui/common/InboxView");profile=new e(c),c.add(profile)}),Ti.addEventListener("openInterests",function(){var e=require("ui/common/InterestsView");profile=new e(c),c.add(profile)}),Ti.addEventListener("openSettings",function(){var e=require("ui/common/SettingsView");profile=new e(c),c.add(profile)}),Titanium.Geolocation.addEventListener("location",a);var h=(Ti.UI.createView({height:"10dp"}),Ti.UI.createImageView({image:s+"menu.png",right:"12.5dp",center:{y:"50dp"}})),w=Ti.UI.createImageView({image:s+"help.png",left:"12.5dp",bottom:"15dp"}),v=Ti.UI.createImageView({image:s+"helpScreen.png",bottom:"0dp"}),A=Ti.UI.createImageView({image:s+"profile.png",left:"12.5dp",center:{y:"50dp"}}),U=Ti.UI.createImageView({image:s+"sirviR.png",left:"-320dp"});U.addEventListener("click",function(){r()});var P=Ti.UI.createView({height:Ti.UI.FILL,width:Ti.UI.FILL,backgroundColor:"#333",opacity:.7}),y=Ti.UI.createView({height:Ti.UI.FILL,width:Ti.UI.FILL,backgroundColor:"#333",opacity:0}),E=Ti.UI.createView({height:"386.5dp",width:"200dp",right:"50dp",transform:Ti.UI.create2DMatrix().rotate(179),anchorPoint:{x:0,y:.5},opacity:0}),S=Ti.UI.createImageView({image:s+"healthR.png",width:"72.5dp",height:"73dp"}),L=Ti.UI.createImageView({image:s+"lawR.png",width:"73.5dp",height:"74dp"}),N=Ti.UI.createImageView({image:s+"dateR.png",width:"72.5dp",height:"73dp"}),b=Ti.UI.createImageView({image:s+"law.png",top:"0dp",left:"20dp"}),O=Ti.UI.createImageView({image:s+"health.png",right:"0dp"}),C=Ti.UI.createImageView({image:s+"dating.png",right:"45.5dp",bottom:"0dp"}),_=Ti.UI.createImageView({image:s+"finance.png",right:"65dp",bottom:"-40dp"}),k=Ti.UI.createImageView({image:s+"raffle.png",bottom:"-70dp",left:"-90dp",opacity:0});sunAnimation=Ti.UI.createAnimation({left:"5dp",duration:650,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT}),planetAnimation=Ti.UI.createAnimation({right:"20dp",transform:Ti.UI.create2DMatrix().rotate(0),opacity:1,duration:1e3,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT}),planetZoom=Ti.UI.createAnimation({width:"200dp",height:"200dp",left:"0dp",center:{y:Ti.Platform.displayCaps.platformHeight/2},duration:500,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT}),planetRotateOut=Ti.UI.createAnimation({transform:Ti.UI.create2DMatrix().rotate(-179),opacity:0,duration:1e3,curve:Ti.UI.ANIMATION_CURVE_LINEAR,right:"50dp"}),shrinkBtn=Ti.UI.createAnimation({transform:Ti.UI.create2DMatrix().scale(.9,.9),opacity:1,duration:500,center:{x:"93dp",y:Ti.Platform.displayCaps.platformHeight/2}}),U.animate(sunAnimation,function(){E.animate(planetAnimation),O.animate({right:"26.5dp",top:"59dp",duration:1e3,curve:Ti.UI.ANIMATION_CURVE_EASE_IN_OUT}),C.animate({right:"0dp",bottom:"158dp",duration:1e3,curve:Ti.UI.ANIMATION_CURVE_EASE_IN_OUT}),_.animate({right:"26.5dp",bottom:"59dp",duration:1100,curve:Ti.UI.ANIMATION_CURVE_EASE_IN_OUT}),k.animate({bottom:"0dp",left:"20dp",opacity:1,duration:1100,curve:Ti.UI.ANIMATION_CURVE_EASE_IN_OUT}),setTimeout(function(){v.show()},1500)}),b.addEventListener("click",function(){if(Ti.App.Properties.getBool("questions",!1)){var e=(Ti.Platform.displayCaps.platformHeight-386.5)/2+36.75,i=Ti.Platform.displayCaps.platformWidth-163.25;L.center={x:i,y:e},c.add(L),b.hide(),L.animate(planetZoom),E.animate(planetRotateOut,function(){Ti.fireEvent("lawview",{x:"law"})}),U.animate(shrinkBtn)}else o()}),O.addEventListener("click",function(){if(Ti.App.Properties.getBool("questions",!1)){var e=(Ti.Platform.displayCaps.platformHeight-386.5)/2+36.75+59,i=Ti.Platform.displayCaps.platformWidth-46.5-36.25;S.center={x:i,y:e},c.add(S),O.hide(),S.animate(planetZoom),E.animate(planetRotateOut,function(){Ti.fireEvent("lawview",{x:"health"})}),U.animate(shrinkBtn)}else o()}),C.addEventListener("click",function(){if(Ti.App.Properties.getBool("questions",!1)){var e=Ti.Platform.displayCaps.platformWidth-20-36.25;N.center={x:e,y:"50%"},c.add(N),C.hide(),N.animate(planetZoom),E.animate(planetRotateOut,function(){Ti.fireEvent("lawview",{x:"date"})}),U.animate(shrinkBtn)}else o()});var V=require("ui/common/QuestionView");k.addEventListener("click",function(){loaded?o():n()});var x=Titanium.UI.createView({height:Titanium.UI.FILL,width:Titanium.UI.FILL,backgroundImage:"/images/mainmenu/background.png"}),R=Titanium.UI.createImageView({image:"/images/law/home.png",left:"12.5dp",center:{y:"40dp"}}),H=Titanium.UI.createImageView({height:Titanium.UI.FILL,width:Titanium.UI.FILL,backgroundImage:"/images/mainmenu/spstart.png"}),F=Titanium.UI.createView({height:"50dp",bottom:"40dp"}),D=m.createButton("Register","#0d004c");D.addEventListener("click",function(){o()}),F.add(D),x.add(H),x.add(R),x.add(F),R.addEventListener("click",function(){c.remove(x)}),_.addEventListener("click",function(){var e=require("ui/common/Offers");c.add(new e)});var q=require("ui/common/rewards");return h.addEventListener("click",function(){_rewards=new q,c.add(_rewards)}),w.addEventListener("click",function(){v.show()}),v.addEventListener("click",function(){v.hide()}),A.addEventListener("click",function(){t(T)}),E.add(b),E.add(O),E.add(C),E.add(_),E.add(k),c.add(E),c.add(U),c.add(f),c.add(h),c.add(w),c.add(A),c.add(v),v.hide(),c}module.exports=MainMenu;